<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="./theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Jadi" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="LPIC1, 101, LPIC1-101-500, LPIC1, " />

<meta property="og:title" content="103.7 Search text files using regular expressions "/>
<meta property="og:url" content="./1037-search-text-files-using-regular-expressions.html" />
<meta property="og:description" content="" />
<meta property="og:site_name" content="lpic1book" />
<meta property="og:article:author" content="Jadi" />
<meta property="og:article:published_time" content="2010-12-03T10:20:00+01:00" />
<meta name="twitter:title" content="103.7 Search text files using regular expressions ">
<meta name="twitter:description" content="">

        <title>103.7 Search text files using regular expressions  Â· lpic1book
</title>



        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-4CZV14VZXW"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-4CZV14VZXW');
        </script>
        
    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="./"><span class=site-name>lpic1book</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                </li>
                                <li ><a href="./">Home</a></li>
                                <li ><a href="./support">Support/Donate</a></li>
                                <li ><a href="./archives.html">Chapters</a></li>
                                <li ><a href="./tags.html">Tags</a></li>
                                <li><form action="https://www.google.com/search" method="get" target="_blank" class="navbar-search"> <input type="hidden" name="sitesearch" value="https://linux1st.com/"/><input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="./1037-search-text-files-using-regular-expressions.html">
                103.7 Search text files using regular expressions
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <div class="alert alert-danger" role="alert">
  This chapter is still a Work In Progress. Do not rely on it for LPIC version 500 exam. Will be updated in a few weeks.
</div>

<p><em>Weight: 3</em></p>
<p>Candidates should be able to manipulate files and text data using regular expressions. This objective includes creating simple regular expressions containing several notational elements as well as understanding the differences between basic and extended regular expressions. It also includes using regular expression tools to perform searches through a filesystem or file content.</p>
<h2>Objectives</h2>
<ul>
<li>Create simple regular expressions containing several notational elements.</li>
<li>Understand the differences between basic and extended regular expressions.</li>
<li>Understand the concepts of special characters, character classes, quantifiers and anchors.</li>
<li>Use regular expression tools to perform searches through a filesystem or file content.</li>
<li>
<p>Use regular expressions to delete, change and substitute text.</p>
</li>
<li>
<p>grep</p>
</li>
<li>egrep</li>
<li>fgrep</li>
<li>sed</li>
<li>regex(7)</li>
</ul>
<h3>Regex</h3>
<p>Regular expression, Regex, regexp is a pattern to describe what we want to <em>match</em> from a text. Here will discuss the form of regex which is used with the <strong>grep</strong> (generalised regular expression processor) command.</p>
<blockquote>
<p>There is two kind of regex in GNU grep: Basic an Extended.</p>
</blockquote>
<h4>Basic blocks</h4>
<p><strong>Adding two expressions</strong></p>
<p>If you need to add (concat) two expressions, just write them after each other.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Regex</th>
<th style="text-align: left;">Will match</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">a</td>
<td style="text-align: left;">ali, mina, hamid, jadi</td>
</tr>
<tr>
<td style="text-align: left;">na</td>
<td style="text-align: left;">nasim, mina, nananana batman, mona</td>
</tr>
</tbody>
</table>
<p><strong>Repeating</strong></p>
<ul>
<li>The <strong>*</strong> means repeating the previous character for 0 or more</li>
<li>The <strong>+</strong> means repeating the previous character for 1 or more</li>
<li>the <strong>?</strong> means zero or one repeats</li>
<li>{n,m}  The item is matched at least n times, but not more than m times</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: left;">Regex</th>
<th style="text-align: left;">Will match</th>
<th style="text-align: left;">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">a*b</td>
<td style="text-align: left;">ab, aaab, aaaaab, aaabthis</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">a*b</td>
<td style="text-align: left;">b, mobser</td>
<td style="text-align: left;">Because there is a b here with zero <strong>a</strong> before it</td>
</tr>
<tr>
<td style="text-align: left;">a+b</td>
<td style="text-align: left;">ab, aab, aaabenz</td>
<td style="text-align: left;">wont match <strong>sober</strong> or <strong>b</strong> because there needs to be at lear one <strong>a</strong></td>
</tr>
<tr>
<td style="text-align: left;">a?b</td>
<td style="text-align: left;">ab, a<strong>ab</strong>, b, batman (zero a then b), ...</td>
<td style="text-align: left;">.</td>
</tr>
</tbody>
</table>
<p><strong>Alternation (|)</strong></p>
<p>If you say <code>a\|b</code> it will match a or b.</p>
<p><strong>Character Classes</strong></p>
<p>The dot (<strong>.</strong>) means any character. So <strong>..</strong> will match anything with at least two character in it. You can also create your own classes with [abc] which will match a or b or c and [a-z] which match a to z.</p>
<p>You can also refer to digits with \d and</p>
<p><strong>Ranges</strong></p>
<p>There are easy ways to commonly used classes. Named classes open with [: and close with :]</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Range</th>
<th style="text-align: left;">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">[:alnum:]</td>
<td style="text-align: left;">Alphanumeric characters</td>
</tr>
<tr>
<td style="text-align: left;">[:blank:]</td>
<td style="text-align: left;">Space and tab characters</td>
</tr>
<tr>
<td style="text-align: left;">[:digit:]</td>
<td style="text-align: left;">The digits 0 through 9 (equivalent to 0-9)</td>
</tr>
<tr>
<td style="text-align: left;">[:upper:] and [:lower:]</td>
<td style="text-align: left;">Upper and lower case letters, respectively.</td>
</tr>
<tr>
<td style="text-align: left;">^ (negation)</td>
<td style="text-align: left;">As the first character after [ in a character class negates the sense of the remaining characters</td>
</tr>
</tbody>
</table>
<blockquote>
<p>A common form is .* which matches any character (zero or any length).</p>
</blockquote>
<p><strong>Matching specific locations</strong></p>
<ul>
<li>The caret <strong>^</strong> means beginning of the string</li>
<li>The dollar <strong>$</strong> means the end of the string</li>
</ul>
<h4>Samples</h4>
<ul>
<li><code>^a.*</code> Matches anything that starts with a</li>
<li><code>^a.*b$</code> Matches anything that starts with a and ends with b</li>
<li><code>^a.*\d+.*b$</code> Matches anything starting with a, have some digits in the middle and end with b</li>
<li><code>^(l|b)oo</code> Matches anything starts with l or b and then have oo</li>
<li><code>[f-h]|[A-K]$</code> The last character should be f to h (capital or small)</li>
</ul>
<h3>grep</h3>
<p>The <code>grep</code> command can search inside the files.</p>
<div class="highlight"><pre><span></span><code>$ grep p friends
payam
pedram
$
</code></pre></div>

<p>There are the most important switches:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">switch</th>
<th style="text-align: left;">meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">-c</td>
<td style="text-align: left;">just show the count</td>
</tr>
<tr>
<td style="text-align: left;">-v</td>
<td style="text-align: left;">reverse the search</td>
</tr>
<tr>
<td style="text-align: left;">-n</td>
<td style="text-align: left;">show line numbers</td>
</tr>
<tr>
<td style="text-align: left;">-l</td>
<td style="text-align: left;">show only file names</td>
</tr>
<tr>
<td style="text-align: left;">-i</td>
<td style="text-align: left;">case insensitive</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>$ grep p *
friends:payam
friends:pedram
what_I_have.txt:laptop    2
what_I_have.txt:pillow    5
what_I_have.txt:apple    2
$ grep p * -n
friends:12:payam
friends:15:pedram
what_I_have.txt:2:laptop    2
what_I_have.txt:3:pillow    5
what_I_have.txt:4:apple    2
$ grep p * -l
friends
what_I_have.txt
$ grep p * -c
friends:2
what_I_have.txt:3
$
</code></pre></div>

<blockquote>
<p>If is very common to combine grep and find: <code>find . -type f -print0 | xargs -0 grep -c a | grep -v ali</code> # find all files with <strong>a</strong> in them but not <strong>ali</strong>`</p>
</blockquote>
<h3>extended grep</h3>
<p>Extended grep is a GNU extension. It does not need the escaping and much easier. It can be used with -E option or <strong>egrep</strong> command which equals to <code>grep -E</code>.</p>
<h3>Fixed grep</h3>
<p>If you need to search the exact string (and not interpret it as a regex), use <code>grep -F</code> or <code>fgrep</code> so the <code>fgrep this$</code> wont go for the end of the line and will find <em>this$that</em> too.</p>
<h3>sed</h3>
<p>In previous lessons we saw simple <code>sed</code> usage. Here I have great news for you: <strong>sed understands regex</strong>! If is good to use <code>-r</code> switch to tell sed that we are using them.</p>
<div class="highlight"><pre><span></span><code>$ sed -r &quot;s/^(a|b)/STARTS WITH A OR B/&quot; friends
STARTS WITH A OR Bmir
mina
jadi
STARTS WITH A OR Bita
STARTS WITH A OR Bli
hassan
</code></pre></div>

<p>Main switches:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">switch</th>
<th style="text-align: left;">meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">-r</td>
<td style="text-align: left;">use advanced regex</td>
</tr>
<tr>
<td style="text-align: left;">-n</td>
<td style="text-align: left;">suppress output, you can use p at the end of your regex ( /something/p ) to print the output</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>$ sed -rn &quot;/^(a|b)/p&quot; friends
amir
bita
ali
</code></pre></div>

<p>.</p>
<p>.</p>
<p>. .</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>


             
 
            
            
            







            <hr/>

            <!-- show next and previous links -->
            <table style="background: white; border: 0; font-size: 0.8em;"><tr>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <td style="background: white; border: 0;">
                            <a href="./1036-modify-process-execution-priorities.html">â 103.6 Modify process execution priorities</a>
                </td>
                <td style="background: white; border: 0;"><center ><a href="/archives.html">Chapter List</a></center></td>
                <td style="background: white; border: 0; text-align: right;">
                            <a href="./1038-basic-file-editing.html">103.8 Basic file editing â</a>
                </td>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </tr></table>
            
            <hr />


	<div class=comment>

<div id="disqus_thread"></div>
<script>
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://linux1st.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


	</div>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Category</h4>
            <a class="category-link" href="./categories.html#lpic1-ref">LPIC1</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="./tags.html#101-ref">101
                    <span class="superscript">38</span>
</a></li>
                <li><a href="./tags.html#lpic1-ref">LPIC1
                    <span class="superscript">42</span>
</a></li>
                <li><a href="./tags.html#lpic1-101-500-ref">LPIC1-101-500
                    <span class="superscript">41</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="./theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>